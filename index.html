<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>ARUNNER</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="style.css">
  <meta name="theme-color" content="#020617">
</head>
<body>

  <div id="loadingOverlay" class="loading-overlay is-hidden" aria-hidden="true">
    <div class="loading-panel">
      <div class="loading-text">Loading ...</div>
      <div class="loading-bar" aria-hidden="true"><div class="loading-bar-fill"></div></div>
    </div>
  </div>

  <div id="loginOverlay" class="login-overlay">
    <div class="login-card">
      <h2>ARUNNER</h2>
      <p class="login-subtitle">Enter your details so we can save your answers</p>

      <label class="login-label">Student name
        <input id="studentName" class="login-input" type="text" autocomplete="name">
      </label>

      <label class="login-label">Student code
        <input id="studentCode" class="login-input" type="text">
      </label>

      <label class="login-label">Phone
        <input id="studentPhone" class="login-input" type="tel" autocomplete="tel">
      </label>

      <button id="loginButton" class="login-button" type="button">Start</button>
    </div>
  </div>

  <div class="frame">
    <div class="frame-inner">
      <div class="topbar">
        <div id="questionNumber" class="pill pill-left">1/1</div>
        <div class="pill pill-right"><span class="pill-label">TIME</span><span id="timerDisplay" class="pill-time">60:00</span></div>
      </div>

      <div id="loading" class="loading hidden" aria-hidden="true">Loading ...</div>

      <div id="questionCard" class="card hidden fade" aria-live="polite">
        <div class="question-title" id="questionText"></div>

        <div class="media-wrap">
          <img id="progressGraph" class="media" src="" alt="graph">
        </div>

        <div id="extractHolder" class="extract-holder"></div>

        <div id="answers" class="answers-grid"></div>

        <div id="feedback" class="feedback"></div>
      </div>

      <div class="bottombar">
        <button id="prevQuestion" class="btn btn-ghost" type="button">&lt; Previous</button>
        <div class="bottombar-right">
          <button id="nextQuestion" class="btn btn-ghost" type="button">Next &gt;</button>
          <button id="finishButton" class="btn btn-solid" type="button">Finish</button>
        </div>
      </div>
    </div>

    <div id="graphModal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <button class="modal-close graph-close" aria-label="Close graph">&times;</button>
        <img id="graphModalImg" src="" alt="Graph large" class="modal-image">
      </div>
    </div>

    <div id="extractModal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <button class="modal-close extract-close" aria-label="Close extract">&times;</button>
        <img id="extractModalImg" src="" alt="Exam extract" class="modal-image">
      </div>
    </div>
  </div>

    <div id="qrModal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-content" style="max-width:min(520px, 96vw)">
        <button class="modal-close qr-close" aria-label="Close">&times;</button>
        <div style="font-weight:1000;margin-bottom:10px">Scan to upload handwritten answer</div>
        <canvas id="qrCanvas" width="420" height="420" style="width:100%;max-width:420px;height:auto;display:block;margin:0 auto;"></canvas>
        <div id="qrHint" style="margin-top:10px;opacity:0.85;font-size:13px"></div>
      </div>
    
    <div id="handModal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-content" style="max-width:min(940px, 96vw)">
        <button class="modal-close hand-close" aria-label="Close">&times;</button>
        <div style="font-weight:1000;margin-bottom:10px">Handwritten answer</div>
        <img id="handModalImg" src="" alt="Handwritten answer" class="modal-image">
        <div class="modal-actions">
          <button id="handDownloadBtn" class="btn btn-solid" type="button">Download</button>
        </div>
      </div>
    </div>
</div>


  <div id="reportOverlay" class="report-overlay hidden" aria-hidden="true">
    <div class="results-shell">
      <div class="results-top">
        <div class="results-badge" aria-hidden="true">
          <span id="reportBadge">0%</span>
        </div>
        <div class="results-title">ARUNNER Results</div>
        <div class="results-sub">Test completed <span class="results-check" aria-hidden="true">âœ…</span></div>
        <div class="results-student" id="reportStudent"></div>
      </div>

      <div class="results-panel">
        <div class="results-panel-title">Summary</div>
        <div class="results-summary-grid">
          <div class="results-stat">
            <div class="results-stat-label">Total questions</div>
            <div class="results-stat-value" id="reportTotal">0</div>
          </div>
          <div class="results-stat">
            <div class="results-stat-label">Answered</div>
            <div class="results-stat-value" id="reportAnswered">0</div>
          </div>
          <div class="results-stat">
            <div class="results-stat-label">Correct</div>
            <div class="results-stat-value good" id="reportCorrect">0</div>
          </div>
          <div class="results-stat">
            <div class="results-stat-label">Wrong</div>
            <div class="results-stat-value bad" id="reportWrong">0</div>
          </div>
          <div class="results-stat">
            <div class="results-stat-label">Skipped</div>
            <div class="results-stat-value" id="reportSkipped">0</div>
          </div>
          <div class="results-stat">
            <div class="results-stat-label">Accuracy</div>
            <div class="results-stat-value" id="reportAccuracy">0%</div>
          </div>
          <div class="results-stat wide">
            <div class="results-stat-label">Time used</div>
            <div class="results-stat-value" id="reportTime">0:00</div>
          </div>
        </div>

        <div class="results-actions">
          <button id="reportRestart" class="btn btn-solid" type="button">Restart</button>
          <button id="reportExportPdf" class="btn btn-ghost" type="button">Export as PDF</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <script src="script.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js').catch(function () {});
    }
  </script>

</body>
</html>
